<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Upload Image</title>
    <!-- JQUERY START -->
    <script
      src="https://code.jquery.com/jquery-3.6.1.js"
      integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI="
      crossorigin="anonymous"
    ></script>
    <!-- JQUERY END -->
    <!-- BOOTSTRAP 5 START -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <!-- BOOTSTRAP 5 END -->
    <!-- MDB START -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.20.0/css/mdb.min.css"
      integrity="sha512-hj9rznBPdFg9A4fACbJcp4ttzdinMDtPrtZ3gBD11DiY3O1xJfn0r1U5so/J0zwfGOzq9teIaH5rFmjFAFw8SA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <!-- MDB END -->
    <!-- FONTAWESOME START -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
      integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,1,0"
    />
    <!-- FONTAWESOME END -->
    <!-- CSS START -->
    <link rel="stylesheet" type="text/css" href={{url_for('static' ,
    filename='css/style.css' )}}> <link rel="stylesheet" type="text/css"
    href={{url_for('static' , filename='css/media.css' )}}> <link
    rel="stylesheet" type="text/css" href={{url_for('static' ,
    filename='css/chatstyle.css' )}}>
    <!-- CSS END -->
  </head>

  <body>
    <!-- MAIN START -->
    <section class="uploadedImgPage">
      <div class="container">
        <div class="row">
          <div class="offset-lg-5 col-lg-6">
            <div class="container main" style="background-color: aliceblue; height: 86vh;
    overflow-y: auto;
    overflow-x: hidden;">
              <div class="row">
                <div class="col-lg-12 mt-2">
                  <div class="my-1">
                    <a href="/" class=""
                    ><i
                    class="fas fa-long-arrow-alt-left fw-bold fa-2x" style="color: #317e95;"
                    ></i
                    ></a>
                  </div>
                </div>
              </div>
              <div id="content">
                {% for prediction in predictions_list %}
                <div class="row">
                  <div class="col-lg-12">
                    <div class="text-center">
                      <h3 class="text-black fw-bold mt-3">
                        Uploaded Image: {{ prediction.img }}
                      </h3>
                      <img
                        class="img-fluid border rounded imgheightWidth"
                        src="{{ url_for('static', filename='images/' + prediction.img) }}"
                        alt="Image"
                      />
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-lg-12">
                    <div class="text-center">
                      <h3 class="text-black fw-bold mt-3">NephroAlert Classification</h3>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-lg-12">
                    <div class="text-center centerDiv">
                      <table class="table table-bordered table-sm">
                        <thead class="bg-white text-dark">
                          <tr>
                            <th class="fw-bold fs-5">Rank</th>
                            <th class="fw-bold fs-5">Class</th>
                            <th class="fw-bold fs-5">Probability</th>
                            <th class="fw-bold fs-5">Disease Detected</th>
                          </tr>
                        </thead>
                        <tbody class="text-black">
                          <tr>
                            <td class="">1<sup>st</sup></td>
                            <td>{{ prediction.class1 }}</td>
                            <td>{{ prediction.prob1 }} %</td>
                            <td>
                              <span class="badge badge-success p-2">YES</span>
                            </td>
                          </tr>
                          <tr>
                            <td class="">2<sup>nd</sup></td>
                            <td>{{ prediction.class2 }}</td>
                            <td>{{ prediction.prob2 }} %</td>
                            <td>
                              <span class="badge badge-danger p-2">NO</span>
                            </td>
                          </tr>
                          <tr>
                            <td class="">3<sup>rd</sup></td>
                            <td>{{ prediction.class3 }}</td>
                            <td>{{ prediction.prob3 }} %</td>
                            <td>
                              <span class="badge badge-danger p-2">NO</span>
                            </td>
                          </tr>
                          <tr>
                            <td class="">4<sup>th</sup></td>
                            <td>{{ prediction.class4 }}</td>
                            <td>{{ prediction.prob4 }} %</td>
                            <td>
                              <span class="badge badge-danger p-2">NO</span>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
                {% endfor %}
              </div>

              <div class="col-lg-12 mb-2 text-center">
                <div id="page"></div>
                <button
                  id="cmd"
                  class="btn btn-danger btn-block btn-sm btn_print" 
                  style="border-radius: 50px;"
                >
                  Download PDF <i class="fa-solid fa-file-pdf"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <button class="chatbot-toggler">
      <span class="material-symbols-rounded">mode_comment</span>
      <span class="material-symbols-outlined">close</span>
    </button>
    <div class="chatbot">
      <header>
        <h2>NephroAlert Chatbot</h2>
        <span class="close-btn material-symbols-outlined">close</span>
      </header>
      <ul class="chatbox">
        <li class="chat incoming">
          <span class="material-symbols-outlined">smart_toy</span>
          <p>Hi there <br />How can I help you today?</p>
        </li>
      </ul>
      <div class="chat-input">
        <textarea
          placeholder="Enter a message..."
          spellcheck="false"
          required
        ></textarea>
        <span id="send-btn" class="material-symbols-rounded">send</span>
      </div>
    </div>
    <!-- MAIN END -->
    <!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"></script>
    <script type="text/javascript" src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script> -->

    <!-- <script type="text/javascript"
        src="https://raw.githack.com/eKoopmans/html2pdf/master/dist/html2pdf.bundle.js"></script> -->
    <!-- BOOTSTRAP 5 START -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <!-- BOOTSTRAP 5 END -->
    <!-- MDB START -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.20.0/js/mdb.min.js"
      integrity="sha512-XFd1m0eHgU1F05yOmuzEklFHtiacLVbtdBufAyZwFR0zfcq7vc6iJuxerGPyVFOXlPGgM8Uhem9gwzMI8SJ5uw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <!-- MDB END -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
  </body>
<script src={{url_for('static' ,
    filename='js/chatscript.js' )}}></script>
  <script type="text/javascript">
    $(document).ready(function ($) {
      $(document).on("click", ".btn_print", function (event) {
        event.preventDefault();

        var element = document.getElementById("content");

        var opt = {
          margin: 1,
          filename: "Report.pdf",
          image: { type: "jpeg", quality: 0.98 },
          html2canvas: { scale: 2 },
          jsPDF: { unit: "in", format: "letter", orientation: "landscape" },
        };

        html2pdf().set(opt).from(element).save();
      });
    });
  </script>
</html>
